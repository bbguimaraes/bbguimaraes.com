local util <const> = require "lib.util"

local t <const> = {
    {2025, {
        {"9788897933540", "Superga: la storia, la basilica, la tragedia"},
        {"9781684515332", "Light of the mind, light of the world"},
        {"9780310364610", "The truth and beauty"},
        {"9780007368600", "Northanger abbey"},
        {"9788863739510", "Musei Reali – guida alla visita"},
        {"9788831513227", "L'mmitazione di Cristo"},
        {"9788807900471", "Edipo re"},
        {"9788877077165", "Piemonte romano"},
        {"9780310368342", "The kingdom of Cain"},
        {"9780007461219", "Mere Christianity"},
        {"9788807900228", "Ricordi dal sottosuolo"},
        {"9788573266054", "Poética"},
        {"9788806206802", "Io e te"},
        {"9780199538935", "Phaedo"},
        {nil            , "Elettra"},
        {nil            , "Edipo a Colono"},
        {"9788845226571", "L'alchimista"},
        {"9788804700883", "Fedro"},
        {nil            , "No goals, no glory"},
        {"9788804772132", "Il sentiero dei nidi di ragno"},
        {"9781684513451", "How to save the West"},
        {"9780241252086", "White nights"},
        {"9780718017347", "The great good thing"},
        {"9780007157174", "That hideous strength"},
    }},
    {2024, {
        {nil            , "De vita beata"},
        {"9788809911710", "Lettera sulla felicità e altri scritti"},
        {"9780007157167", "Perelandra"},
        {"9780007157150", "Out of the silent planet"},
        {"9788817169318", "Alcesti"},
        {"9780486290300", "The metamorphosis and other stories"},
        {"9788818031041", "Volo di notte"},
        {"9788886314213", "Senofonte – Apologia di Socrate"},
        {"8798856907421", "Parco archeologico di Ercolano"},
        {"9788817091657", "Il piccolo principe"},
        {"9788578440718", "Fale tudo em italiano em viagens!"},
        {nil            , "Via crucis"},
    }},
    {2023, {
        {"9781857150704", "The brothers Karamazov"},
        {nil            , "O livro dos manuais"},
        {"9788598559148", "Veronika decide morrer"},
        {"9788598559193", "O manual do guerreiro da luz"},
        {"9771415748290", "O monte cinco"},
        {"9788598559223", "Na margem do rio Piedra eu sentei e chorei"},
        {"9788598559186", "Maktub"},
        {"9788598559179", "As Valkírias"},
        {"9788598559216", "Brida"},
        {"9788584390700", "O diário de um mago"},
        {"9780141189574", "Siddhartha"},
        {"9780201615869", "The practice of programming"},
        {"9780007461240", "The screwtape letters (Elise)"},
        {"9780135957059", "The pragmatic programmer"},
        {"9788502103771", "O alquimista"},
        {"9781509852956", "Wages, price, and profit"},
        {"9781509852956", "The communist manifesto"},
        {nil            , "Memorabilia"},
        {"9780007350810", "Wuthering heights"},
        {"9781784875046", "The power of the powerless"},
        {"9780241453865", "Animal farm"},
        {"9780674049161", "Pride and prejudice"},
        {"9780199213610", "The Nicomachean ethics"},
        {"9780141018850", "The prince"},
        {"9780199540198", "Symposium"},
        {"9780199540501", "Crito"},
        {"9780199540501", "Apology of Socrates"},
        {"9780199540501", "Euthyprho"},
        {"9780007420230", "The call of the wild (Mariana)"},
        {"9780099518471", "Brave new world"},
        {nil            , "De vulgari eloquentia"},
    }},
    {2022, {
        {"9780008425029", "Meditations"},
        {"9780275967307", "The C++ programming language"},
        {"9780198709701", "Crime and punishment"},
        {"9780199535859", "The merchant of Venice"},
        {"9781593272203", "The Linux programming interface"},
        {"9780593084649", "Beyond order: 12 more rules for life"},
        {"9780199535866", "A midsummer night's dream"},
    }},
    {2021, {
        {"9780131103627", "The C programming language"},
        {"9781645940388", "A Christmas carol"},
        {"0879804211"   , "The knight in rusty armor"},
    }},
    {2020, {
        {"9781491903995", "Effective modern C++"},
        {"9780201749625", "Effective STL"},
        {"9780201633719", "More effective C++"},
        {"9780321334879", "Effective C++"},
        {"9781617295812", "Modern C"},
        {"9780124058941", "Heterogeneous Computing with OpenCL"},
    }},
    {2019, {
        {"9780345816023", "12 rules for life"},
    }},
    {2017, {
        {"853590641X"   , "Além do bem e do mal"},
        {"8588350777"   , "Uma breve história do mundo"},
        {"9780812984415", "Cloud atlas"},
        {"9781400079179", "The Da Vinci code"},
    }},
    {2014, {
        {"9781449392512", "Physics for game developers"},
        {"9781593271442", "Hacking: the art of exploitation"},
        {"9781593272883", "Metasploit: the penetration tester's guide"},
        {"9781449367626", "Designing for behavior change"},
        {"9781449329273", "Understanding computation"},
        {"9781593274870", "The modern web"},
        {"9780596529949", "Apache cookbook"},
        {"9781680501278", "Practical Vim"},
        {"9781934356623", "Test driven development for embedded C"},
        {"9781491903896", "21st century C"},
        {"9780596001087", "The cathedral and the bazaar"},
        {"9781934356791", "The developer's code"},
        {"9781934356968", "tmux: productive mouse-free development"},
    }},
    {2013, {
        {"0262510871", "Structure and interpretation of computer programs"},
        {"0201485672", "Refactoring: improving the design of existing code"},
        {"8576051281", "Perícia forense computacional: teoria e prática aplicada, como investigar e esclarecer ocorrências no mundo cibernético"},
    }},
    {2012, {
        {"1584500492", "Game programming gems"},
        {"8529300459", "O segredo de Luísa"},
        {"0596002971", "TCP/IP network administration"},
        {"8572325514", "Ilíada"},
        {"8576083949", "Dominando expressões regulares"},
        {"8526808001", "Eneida"},
        {"1578701856", "Intrusion detection"},
        {"0596002564", "Using Samba"},
        {"8572325131", "A divina comédia"},
        {"8535235221", "Metodologia de pesquisa para ciência da computação"},
    }},
    {2011, {
        {"8586539635", "O senhor dos anéis: da fantasia à ética"},
        {"8536303964", "Inteligência artificial: estruturas e estratégias para a resolução de problemas complexos"},
        {"8501012637", "O jôgo das contas de vidro"},
        {"0132017997", "The design of the UNIX operating system"},
        {"8587118110", "Programando com ferramentas GNU"},
        {"0201848406", "Computer graphics: principles and practice"},
        {"8524106824", "Sistemas operacionais e programação concorrente"},
        {"0201308797", "Data structures in C++ using the standard template library"},
        {"850102029X", "Demian"},
        {"8501020303", "Sidarta"},
        {"8501154164", "O lobo da estepe"},
        {"8573076992", "A linguagem de Programação C++"},
        {"8572322671", "O príncipe"},
        {"156592469X", "Running Linux"},
        {"8588639181", "Redes de computadores e a internet: uma abordagem top-down"},
        {"0133499456", "Computer networks"},
    }},
    {2010, {
        {"8570017863", "C++: manual de referência comentado"},
        {"8536306386", "Padrões de arquitetura de aplicações corporativas"},
        {"0131038052", "Artificial intelligence: a modern approach"},
        {"0201633612", "Design patterns: elements of reusable object-oriented software"},
        {"8535204377", "Linux"},
        {"8534606749", "Qualidade e produtividade em software: termo de referência do subprograma setorial da qualidade e produtividade do programa brasileiro de qualidade e produtividade"},
        {"8534611092", "Vetores e geometria analítica"},
        {"0672310708", "Teach yourself C++ in 21 days"},
        {"8539301393", "Contra o método"},
        {"0321335732", "OpenGL programming guide: the official guide to learning OpenGL"},
        {nil         , "Como devemos estudar piano"},
        {"8575220683", "Desenvolvimento de jogos eletrônicos: teoria e prática"},
        {"0139013490", "Object-oriented software design and construction with C++"},
        {"8535215697", "Desenvolvimento de jogos 3D e aplicações em realidade virtual"},
        {"8527100193", "A cultura popular na idade média e no renascimento: o contexto de François Rabelais"},
        {nil         , "O mundo do Renascimento: arte e pensamento renovam a Europa"},
        {nil         , "Entre a idade média e a renascença"},
        {"972924118X", "Computação gráfica"},
        {"8521605951", "Introdução a computação gráfica"},
    }},
    {2009, {
        {"8536301236", "Java: como programar"},
        {"8521611544", "Introdução à estatística"},
        {"8532618049", "Fundamentos de metodologia científica: teoria da ciência e iniciação à pesquisa"},
    }},
    {2008, {
        {"859017851X", "Inglês com textos para informática"},
        {"8522104794", "Cálculo"},
        {"8573744804", "As profecias de Tutankhamon: o segredo sagrado dos maias, egípcios e maçons"},
    }},
    {"Tolkien", {
        {"9788533624429", "As aventuras de Tom Bombadil"},
        {"9788578270735", "Contos inacabados"},
        {"9789721043251", "O Silmarillion"},
        {"9780358652960", "Tales from the perilous realm"},
        {"9780547952109", "The children of Húrin"},
        {"9780395071229", "The hobbit"},
        {"9780007355143", "The hobbit + The lord of the rings"},
        {"9780618391110", "The Silmarillion"},
        {"9788249603060", "Tolkien"},
        {"9780618154050", "Unfinished tales"},
    }},
    {"J. K. Rowling", {
        {"9780747591061", "Harry Potter and the deathly hallows"},
        {"9789722325691", "Harry Potter e a câmara dos segredos"},
        {"9788532523099", "Harry Potter e a ordem da fênix"},
        {"9788532511010", "Harry Potter e a pedra filosofal"},
        {"9788532512529", "Harry Potter e o cálice de fogo"},
        {"9788532512062", "Harry Potter e o prisioneiro de Azkaban"},
    }},
    {"music", {
        {"9788537006054", "Dylan - 100 canções"},
        {"9781846053092", "Eric Clapton"},
        {"9780060754020", "John Lennon"},
        {"9788537006030", "Pink Floyd - Primórdios"},
        {"9788571108912", "Saindo da sarjeta"},
    }},
    {"Brazilian", {
        {"25506838"     , "Matemática (Aluísio Andrade Lemos, Fidefico Higuchi, Salomão Fridman)"},
        {"1518413"      , "Memórias de um gigolô"},
        {"9788589885997", "O guerreiro de Deus"},
        {"B004NJS8BC"   , "O livro dos manuais"},
        {"9788589189088", "O primeiro guerreiro"},
        {"9788525405364", "Os tambores silenciosos"},
    }},
    {"D&amp;D", {
        {"9788575320532", "Canção e silêncio"},
        {"9788575320402", "Cenário de campanha Forgotten Realms"},
        {"9788575321072", "Livro do jogador v. 3.5"},
        {"9788575320105", "Livro do mestre v. 3.0"},
        {"9788575321157", "Livro do mestre v. 3.5"},
        {"9788575321164", "Livro dos monstros v. 3.5"},
        {"9788575321607", "Livro dos níveis épicos"},
    }},
    {"etc", {
        {"B001IJ6MWM"   , "A leste do Eden"},
        {"9788525421630", "As aventuras de Huckleberry Finn"},
        {"9788525412010", "As aventuras de Tom Sawyer"},
        {"9788525408365", "A volta ao mundo em 80 dias"},
        {"9788700631625", "Cem anos de solidão"},
        {"9788525421616", "Morte na Mesopotâmia"},
        {"9788574480077", "Musashi (v. 1)"},
        {"9788574480145", "Musashi (v. 2)"},
        {"15168750"     , "Natacha"},
        {"9788510287203", "O amor nos tempos do cólera"},
        {"9788450550467", "O ano de viver perigosamente"},
        {"9788525412232", "O chamado da floresta"},
        {"9788572327480", "O conde de Monte Cristo (vol. 1)"},
        {"9788572327497", "O conde de Monte Cristo (vol. 2)"},
        {"9788598078694", "O ladrão de raios"},
        {"9788573743401", "O livro de cinco anéis"},
        {"9788574024851", "O nome da rosa"},
        {"9788525422965", "On the road"},
        {"B00EUAVTLK"   , "O projeto Haigerloch"},
        {"9788501024985", "O quarto protocolo"},
        {"9788525419644", "Orgulho e preconceito"},
        {"B004TIHXNG"   , "Os ricos são diferentes"},
        {"9788535900910", "Risíveis amores"},
        {"9788501020307", "Sidarta"},
        {"9788528612073", "Zorro"},
    }},
}

local anchors <const> = util.imap(function(_, t)
    return tostring(t[1])
        :gsub(" ", "-")
        :gsub("%.", "")
        :lower()
end, t)

local function generate_item(i, t)
    local year, l <const> = table.unpack(t)
    local ret <const> = {}
    for _, x in ipairs(l) do
        table.insert(ret, concat {
            inline_tag("span", {class = "isbn"}, x[1] and x[1] or "&nbsp;"),
            x[2],
        })
    end
    return lines {
        inline_tag(
            "p",
            {id = anchors[i]},
            inline_tag("b", nil, tostring(year))),
        ul(ret),
    }
end

return include "master.lua" {
    title = "reading list",
    css = {"/main.css", "lib.css"},
    body_class_extra = "no-hor-margin",
    main = div({class = "w80"}, lines {
        include "nav.lua" {
            nav_path = {{".", "lib"}, {nil, "reading list"}},
        },
        main({id = "reading-list"}, lines {
            h1 "reading list",
            par [[
This is a list of every book I have ever read, as best as I have been able to
keep track.  The list is in reverse chronological order, except for some unknown
sections at the end.
]],
            par [[
Most of these I own and have read a physical copy, but some are digital.  Where
possible, I include the
<a href="https://en.wikipedia.org/wiki/ISBN">ISBN</a> code of the exact edition.
]],
            ul(util.imap(generate_item, t)),
        }),
    }),
}
